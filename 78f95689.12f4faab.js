(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{150:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return c})),r.d(t,"metadata",(function(){return l})),r.d(t,"rightToc",(function(){return p})),r.d(t,"default",(function(){return u}));var a=r(2),n=r(6),o=(r(0),r(228)),s=r(231),i=r(234),c={title:"Post-processing"},l={id:"generators/post-process",title:"Post-processing",description:"After a level is generated, we may often want to run some additional logic like spawning enemies, etc. This can be achieved by providing your own post processing logic that will be called after the level is generated and provided with information about the level.",source:"@site/docs\\generators\\post-process.md",permalink:"/ProceduralLevelGenerator-Unity/docs/next/generators/post-process",editUrl:"https://github.com/OndrejNepozitek/ProceduralLevelGenerator-Unity/tree/docusaurus/docs/generators/post-process.md",version:"next",sidebar:"docs",previous:{title:"(PRO) Custom input",permalink:"/ProceduralLevelGenerator-Unity/docs/next/generators/custom-input"},next:{title:"Example 1",permalink:"/ProceduralLevelGenerator-Unity/docs/next/examples/example-1"}},p=[{value:"Built-in post processing steps",id:"built-in-post-processing-steps",children:[{value:"0. Instantiate room template with correct positions",id:"0-instantiate-room-template-with-correct-positions",children:[]},{value:"1. Initialize shared tilemaps",id:"1-initialize-shared-tilemaps",children:[]},{value:"2. Copy rooms to shared tilemaps",id:"2-copy-rooms-to-shared-tilemaps",children:[]},{value:"3. Center grid",id:"3-center-grid",children:[]},{value:"4. Disable room template renderers",id:"4-disable-room-template-renderers",children:[]},{value:"5. Disable room template colliders",id:"5-disable-room-template-colliders",children:[]}]},{value:"Custom post processing",id:"custom-post-processing",children:[{value:"(PRO) Priority callbacks",id:"pro-priority-callbacks",children:[]}]}],d={rightToc:p};function u(e){var t=e.components,r=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},d,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"After a level is generated, we may often want to run some additional logic like spawning enemies, etc. This can be achieved by providing your own post processing logic that will be called after the level is generated and provided with information about the level. "),Object(o.b)("p",null,"To better understand how the generator works, we will first describe which post processing is done by the generator itself and then provide ways to extend this behaviour and provide your own logic."),Object(o.b)("h2",{id:"built-in-post-processing-steps"},"Built-in post processing steps"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"TODO:")," This section is not completed")),Object(o.b)("h3",{id:"0-instantiate-room-template-with-correct-positions"},"0. Instantiate room template with correct positions"),Object(o.b)("h3",{id:"1-initialize-shared-tilemaps"},"1. Initialize shared tilemaps"),Object(o.b)("h3",{id:"2-copy-rooms-to-shared-tilemaps"},"2. Copy rooms to shared tilemaps"),Object(o.b)("h3",{id:"3-center-grid"},"3. Center grid"),Object(o.b)("h3",{id:"4-disable-room-template-renderers"},"4. Disable room template renderers"),Object(o.b)("h3",{id:"5-disable-room-template-colliders"},"5. Disable room template colliders"),Object(o.b)("h2",{id:"custom-post-processing"},"Custom post processing"),Object(o.b)("p",null,"If we want to add our own post processing logic, we have to create a class that inherits from ",Object(o.b)("inlineCode",{parentName:"p"},"DungeonGeneratorPostProcessBase"),". And because the base class is a ScriptableObject, we need to add the ",Object(o.b)("inlineCode",{parentName:"p"},"CreateAssetMenu")," attribute so we are able to create an instance of that ScriptableObject. After a level is generated, the ",Object(o.b)("inlineCode",{parentName:"p"},"Run")," method is called and that is the place where we put our post process logic."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'[CreateAssetMenu(menuName = "Dungeon generator/Examples/Docs/My custom post process", fileName = "MyCustomPostProcess")]\npublic class MyCustomPostProcess : DungeonGeneratorPostProcessBase\n{\n    public override void Run(GeneratedLevel level, LevelDescription levelDescription)\n    { \n        // Implement the logic here\n    }\n}\n')),Object(o.b)("p",null,"With the implementation ready, we now have to create an instance of that ScriptableObject by right clicking in the project view and ",Object(o.b)("em",{parentName:"p"},"Create -> Dungeon generator -> Examples -> Docs -> My custom post process"),". And the last step is to drag and drop this GameObject in the ",Object(o.b)("em",{parentName:"p"},"Custom post process tasks")," section of the dungeon generator."),Object(o.b)(s.c,{src:"img/v2/examples/example1/custom_post_process.png",caption:"Add the ScriptableObject to the Custom post process tasks array",mdxType:"Image"}),Object(o.b)(i.b,{id:"custom-post-processing",mdxType:"FeatureUsage"}),Object(o.b)("p",null,Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/ProceduralLevelGenerator-Unity/docs/next/examples/example-1#enemies"}),"Example 1")),Object(o.b)("h3",{id:"pro-priority-callbacks"},"(PRO) Priority callbacks"))}u.isMDXComponent=!0},231:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return d}));var a=r(2),n=r(0),o=r.n(n),s=r(230);const i=e=>o.a.createElement("div",{style:{display:"inline-block",margin:2,overflow:"hidden",position:"relative",width:`calc(${100/e.cols}% - 4px)`,verticalAlign:"top"}},e.children),c=e=>o.a.createElement("div",{style:{fontSize:"0px",margin:"20px 0"}},o.a.Children.map(e.children,t=>o.a.cloneElement(t,{cols:e.cols||4,fixedHeight:e.fixedHeight}))),l=e=>o.a.createElement(i,{cols:e.cols},o.a.createElement("a",{href:Object(s.a)(e.src),target:"_blank"},o.a.createElement("img",{src:Object(s.a)(e.src),alt:"result",style:{height:!0===e.fixedHeight?800/e.cols+"px":"auto",objectFit:!0===e.fixedHeight?"cover":"initial"}})),void 0!==e.caption&&o.a.createElement(p,null,e.caption)),p=e=>o.a.createElement("div",{style:{fontSize:16,fontStyle:"italic",textAlign:"center",margin:"10px 0px 15px"}},e.children),d=e=>{const{src:t,caption:r,...n}=e;return o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("img",Object(a.a)({src:Object(s.a)(e.src)},n)),void 0!==e.caption&&o.a.createElement(p,null,e.caption))}},234:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return p}));r(236),r(237),r(238),r(239),r(240),r(241),r(242);var a=r(0),n=r.n(a),o=r(232),s=[{id:"outline-override",url:"../basics/room-templates#outline-override",name:"Outline override",usages:[{id:"corridors",description:"Outline override is used to properly handle corridors"}]},{id:"custom-rooms-and-connections",url:"../basics/level-graphs#pro-custom-rooms-and-connections",name:"Custom rooms",usages:[{id:"room-type",description:"The definition of rooms is enhanced with a custom type"}]},{id:"custom-post-processing",url:"../generators/post-process#custom-post-processing",name:"Custom post-processing",usages:[{id:"enemies",description:"A custom post-processing task is used to spawn enemies after a level is generated"},{id:"player-spawn",description:"Move the player to the spawn position of the level"}]}],i=[{id:"example-1",name:"Example 1",url:"../examples/example-1",features:[{id:"custom-post-processing",usage:"enemies",anchor:"enemies"}]},{id:"example-2",name:"Example 2",url:"../examples/example-2",features:[{id:"outline-override",usage:"corridors",anchor:"vertical-corridors"}]},{id:"dead-cells",name:"Dead Cells",url:"../examples/dead-cells",features:[{id:"custom-post-processing",usage:"enemies",anchor:"enemies"},{id:"custom-post-processing",usage:"player-spawn",anchor:"spawn-position"},{id:"custom-rooms-and-connections",usage:"room-type",anchor:"custom-room-and-connection-types"}]}];function c(e){if("undefined"!=typeof window){var t=window.location.href,r=t.split("/");(r[r.length-1].startsWith("#")||t.endsWith("/"))&&(e="../"+e)}return e}var l=function(e){var t=s.find((function(t){return t.id===e.id})).usages.map((function(e){return Object.assign({},e,{examples:[]})}));return i.forEach((function(r){r.features.forEach((function(a){a.id===e.id&&t.find((function(e){return e.id===a.usage})).examples.push({example:r,feature:a})}))})),console.log(t),n.a.createElement("div",{className:"featureUsage"},n.a.createElement("div",{className:"featureUsage__title"},"Where is this feature used?"),n.a.createElement("div",{className:"featureUsage__description"},"Below is the list of examples/tutorials where we use this feature. Feel free to check them out if you're not sure how something works or if you just want to see this feature used in action."),n.a.createElement("table",null,n.a.createElement("tbody",null,t.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.examples.map((function(e,t){return n.a.createElement("span",null,t?", ":"",n.a.createElement(o.a,{to:c(e.example.url+"#"+e.feature.anchor)},e.example.name))}))),n.a.createElement("td",null,e.description))})))))},p=function(e){var t=i.find((function(t){return t.id===e.id})),r=[];return t.features.forEach((function(e){var t=s.find((function(t){return t.id===e.id})),a=t.usages.find((function(t){return t.id===e.usage}));r.push(Object.assign({},e,{feature:t,featureUsage:a}))})),n.a.createElement("div",{className:"featureUsage"},n.a.createElement("div",{className:"featureUsage__title"},"List of used features"),n.a.createElement("div",{className:"featureUsage__description"},"Below is a list of features that are used in this example."),n.a.createElement("table",null,n.a.createElement("tbody",null,r.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,n.a.createElement(o.a,{to:e.feature.url},e.feature.name)),n.a.createElement("td",null,e.featureUsage.description))})))))}}}]);